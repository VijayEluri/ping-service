function initializeMap(){var h=document.getElementById("map_canvas");if(h==undefined){return}var k={zoom:1,center:sourceLL,mapTypeId:google.maps.MapTypeId.ROADMAP};var c=new google.maps.Map(h,k);var f=new google.maps.Marker({position:sourceLL,map:c,title:sourceTitle});if(!sourceLL.equals(targetLL)){var b=new google.maps.Marker({position:targetLL,map:c,title:targetTitle});var l=[sourceLL,targetLL];var j=new google.maps.Polyline({path:l,strokeColor:"#FF0000",strokeOpacity:0.5,strokeWeight:2});j.setMap(c);var d=new Array(sourceLL,targetLL);var a=new google.maps.LatLngBounds();for(var e=0,g=d.length;e<g;e++){a.extend(d[e])}c.fitBounds(a)}}jQuery(document).ready(function(){jQuery(".c-hb").each(function(){var a=jQuery(this);a.attr("href","javascript:void(0)");a.click(function(){hideOverviewCharts();showPrimaryChart();removeHighlights();plotHistogramChart(jQuery(this),"#chart")})});jQuery(".c-pb").each(function(){var a=jQuery(this);a.attr("href","javascript:void(0)");a.click(function(){hideOverviewCharts();showPrimaryChart();removeHighlights();plotPieChart(jQuery(this),"#chart")})});jQuery(".c-m").click(function(){var a=jQuery(this);if(!a.is(".c-n")){return}hideOverviewCharts();showPrimaryChart();removeHighlights();plotLineChart(a,"#chart")});initializeMap()});function plotHistogramChart($this,chartId,chartTitle){highlightHeaders($this.parent(),chartId,chartTitle,buildChartTitle);highlightValuesAndDimensions($this.parent(),false);var jsonData=eval("("+$this.parent().attr("data-json")+")");var d=[];var ticks=[];ticks.push([0,"0"]);for(var idx=0;idx<jsonData.keys.length;idx++){d.push([idx,jsonData.values[idx]]);var key=jsonData.keys[idx];ticks.push([idx+1,key.substring(key.indexOf(";")+1,key.lastIndexOf("."))])}d.push([idx,jsonData.others]);ticks.push([idx+1,"others"]);jQuery.plot(jQuery(chartId),[{data:d,bars:{show:true}}],{xaxis:{ticks:ticks,autoscaleMargin:0.02}})}function plotPieChart($this,chartId,chartTitle){highlightHeaders($this.parent(),chartId,chartTitle,buildChartTitle);highlightValuesAndDimensions($this.parent(),false);var jsonData=eval("("+$this.parent().attr("data-json")+")");var intIdx;var key;var pieLabels=[];pieLabels[1]="No data";pieLabels[2]="Okay";pieLabels[4]="Timeouts";pieLabels[8]="HTTP Errors";pieLabels[16]="Regexp Failures";var pieColors=[];pieColors[1]="#999";pieColors[2]="#4da74d";pieColors[4]="#edc240";pieColors[8]="#cb4b4b";pieColors[16]="#afd8f8";var actualColors=[];var data=[];for(var idx=0;idx<jsonData.keys.length;idx++){key=jsonData.keys[idx];data[data.length]={label:pieLabels[key],data:jsonData.values[idx]};actualColors[actualColors.length]=pieColors[key]}jQuery.plot(jQuery(chartId),data,{colors:actualColors,series:{pie:{show:true}},legend:{show:false}})}function plotLineChart(e,j,h){if(!e.is(".c-n")){return}highlightHeaders(e,j,h,buildLineChartTitle);highlightValuesAndDimensions(e,true);var g=[];var c=[];var b=e.attr("class").split(" ");var f=getColumnClass(b);$dimensions=jQuery(".c-sd");$values=jQuery(".c-sm").filter("."+f);for(var a=0;a<$dimensions.length;a++){c.push([a,jQuery($dimensions.get(a)).html()]);g.push([a,parseFloat(jQuery($values.get(a)).html().replace(",","."))])}jQuery.plot(jQuery(j),[{data:g,lines:{show:true},points:{show:true}}],{xaxis:{ticks:c,autoscaleMargin:0.02}});jQuery('.tickLabel:nth-child(even)[style*="text-align:center"]').each(function(){jQuery(this).css("margin-top","10px")})}function removeHighlights(){jQuery(".c-sm").removeClass("c-sm");jQuery(".c-sh").removeClass("c-sh");jQuery(".c-sd").removeClass("c-sd")}function getColumnClass(a){if(a[1].substr(0,1)=="x"){return a[5]}return a[4]}function getDimensionClass(a){if(a[1].substr(0,1)=="x"){return a[6]}return a[5]}function highlightHeaders(i,m,b,h){var d=i.attr("class").split(" ");var j=d[0];var g=j.split("-");var e=getColumnClass(d);var a=d[1];var f=0;if(a[0]=="x"&&(g.length-a.split("-").length==1)){f=1}var c=jQuery(jQuery("."+j).parent().parent().children().children().get(g.length-2+f));c.addClass("c-sh");var l=jQuery(".a"+e);var k=jQuery("#"+l.attr("class").split(" ")[1]);l.addClass("c-sh");k.addClass("c-sh");if(!b){b=h(l,k,c,i)}setChartTitle(m,b)}function buildChartTitle(h,d,g,b){var a=h.html();a=a.substr(0,1).toUpperCase()+a.substring(1);var c=b.attr("class").split(" ");var f=getDimensionClass(c);var e=jQuery("#"+f).html();return a+" of "+d.html()+" for "+g.html()+" = "+e}function buildLineChartTitle(e,c,d,b){var a=e.html();a=a.substr(0,1).toUpperCase()+a.substring(1);return a+" of "+c.html()+" by "+d.html()}function highlightValuesAndDimensions(b,a){var c=b.attr("class").split(" ");var d=getColumnClass(c);var e=jQuery(b.parent().children().get(0)).attr("colspan");if(a==true){jQuery("."+d).each(function(){var g=jQuery(this);var f=jQuery(g.parent().children().get(0)).attr("colspan");if(e==f){highlightValueWithParentDimension(g)}})}else{highlightValueWithParentDimension(b)}}function highlightValueWithParentDimension(c){var a=c.attr("class").split(" ");var b=getDimensionClass(a);jQuery("#"+b).addClass("c-sd");c.addClass("c-sm")}function setChartTitle(c,b){var a=jQuery(c).parent().children().filter(".chartTitle");a.text(b)};